<section class="hero">
  <div class="container hero-container">
    <div class="text-wraper">
      <h1 class="hero__title">A party without cocktails is not like a party</h1>
      <div class="mobile-hero__picture">
        <picture>
          <source
            srcset="
              ./images/mobile-coctails@1x-min.png 1x,
              ./images/mobile-coctails@2x-min.png 2x
            "
            media="(max-width: 767px)"
          />
          <img src="./images/mobile-coctails@1x-min.png" alt="фото веб-сайту" />
        </picture>
      </div>
      <p class="hero__text">Search your favorite cocktail by ABC</p>
      <div class="list-items">
        <div class="mobile-wrapper">
          <div class="mobile-wrapper-select">
            <span class="hero__select-text">A</span>
            <svg
              class="arrow__icon"
              width="20"
              height="20"
              aria-label="drop-down-menu"
              style="transform: rotate(0.25turn)"
            >
              <use href="./images/icons.svg#icon-arrow"></use>
            </svg>
          </div>
          <div class="list-mobile-filter visually-hidden">
            <ul class="mobile-list-letters">
              <li class="mobile-word">A</li>
              <li class="mobile-word">B</li>
              <li class="mobile-word">C</li>
              <li class="mobile-word">D</li>
              <li class="mobile-word">E</li>
              <li class="mobile-word">F</li>
              <li class="mobile-word">G</li>
              <li class="mobile-word">H</li>
              <li class="mobile-word">I</li>
              <li class="mobile-word">K</li>
              <li class="mobile-word">L</li>
              <li class="mobile-word">M</li>
              <li class="mobile-word">N</li>
              <li class="mobile-word">O</li>
              <li class="mobile-word">P</li>
              <li class="mobile-word">Q</li>
              <li class="mobile-word">R</li>
              <li class="mobile-word">S</li>
              <li class="mobile-word">T</li>
              <li class="mobile-word">U</li>
              <li class="mobile-word">V</li>
              <li class="mobile-word">W</li>
              <li class="mobile-word">X</li>
              <li class="mobile-word">Y</li>
              <li class="mobile-word">Z</li>
              <li class="mobile-word">1</li>
              <li class="mobile-word">2</li>
              <li class="mobile-word">3</li>
              <li class="mobile-word">4</li>
              <li class="mobile-word">5</li>
              <li class="mobile-word">6</li>
              <li class="mobile-word">7</li>
              <li class="mobile-word">8</li>
              <li class="mobile-word">9</li>
              <li class="mobile-word">0</li>
            </ul>
          </div>
        </div>
        <div class="wrapper-tablet-desktop-filter">
          <ul class="list-letters">
            <li class="word">A</li>
            <li class="word">B</li>
            <li class="word">C</li>
            <li class="word">D</li>
            <li class="word">E</li>
            <li class="word">F</li>
            <li class="word">G</li>
            <li class="word">H</li>
            <li class="word">I</li>
            <li class="word">J</li>
            <li class="word">K</li>
            <li class="word">L</li>
            <li class="word">M</li>
            <li class="word">N</li>
            <li class="word">O</li>
            <li class="word">P</li>
            <li class="word">Q</li>
            <li class="word">R</li>
            <li class="word">S</li>
            <li class="word">T</li>
            <li class="word">U</li>
            <li class="word">V</li>
            <li class="word">W</li>
            <li class="word">X</li>
            <li class="word">Y</li>
            <li class="word">Z</li>
          </ul>
          <ul class="list-letters-number">
            <li class="word">1</li>
            <li class="word">2</li>
            <li class="word">3</li>
            <li class="word">4</li>
            <li class="word">5</li>
            <li class="word">6</li>
            <li class="word">7</li>
            <li class="word">8</li>
            <li class="word">9</li>
            <li class="word">0</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="hero__picture">
      <picture>
        <source
          srcset="
            ./images/desktop-coctails@1x-min.png 1x,
            ./images/desktop-coctails@2x-min.png 2x
          "
          media="(min-width: 1280px)"
        />
        <source
          srcset="
            ./images/tablet-coctails@1x-min.png 1x,
            ./images/tablet-coctails@2x-min.png 2x
          "
          media="(min-width: 768px)"
        />
        <source
          srcset="
            ./images/mobile-coctails@1x-min.png 1x,
            ./images/mobile-coctails@2x-min.png 2x
          "
          media="(max-width: 767px)"
        />
        <img src="./images/mobile-coctails@1x-min.png" alt="фото веб-сайту" />
      </picture>
    </div>
  </div>
</section>



.hero {
  @include mobile {
    padding-top: 60px;
    padding-bottom: 40px;
  }
  @include tablet {
    padding-top: 77px;
    padding-bottom: 120px;
  }
  @include desktop {
    padding-top: 97px;
    padding-bottom: 120px;
  }
}

.hero__title {
  width: 300px;
  height: 76px;
  font-family: 'Poppins', sans-serif;
  font-weight: 600;
  font-size: 22px;
  line-height: calc(42 / 22);
  color: $grapefruit-color;
  margin-bottom: 60px;
  @include tablet {
    width: 336px;
    height: 84px;
    font-size: 26px;
    line-height: calc(42 / 26);
    margin-bottom: 40px;
  }
  @include desktop {
    width: 688px;
    height: 160px;
    font-size: 52px;
    line-height: calc(80 / 52);
  }
}


.hero-container {
  display: flex;
  flex-direction: column;  
  @include tablet{
    flex-direction: row;
    gap: 32px;
  }
  @include desktop{
    gap: 59px;
  }
}

.mobile-hero__picture{
  margin-bottom: 60px;
  @include tablet{
    display: none;
  }
}

.hero__picture {
display: none;
@include tablet{
  display: block;
}
}

.hero__text {
  @include mobile {
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    font-size: 14px;
    line-height: calc(28 / 14);
    letter-spacing: 0.02em;
    color: #000000;
    margin-bottom: 20px;
    width: 324px;
  }
  @include tablet {
    color: #202025;
    height: 28px;
    margin-bottom: 40px;
  }
  @include desktop {
    font-size: 18px;
    width: 600px;
    font-size: 18px;
  }
}

.mobile-wrapper {
  @include tablet {
    display: none;
  }
  display: flex;
  flex-direction: column;
  align-items: center;
}

.mobile-wrapper-select {
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 10px;
  gap: 14px;
  width: 93px;
  height: 34px;
  border: 1px solid $grapefruit-color;
  border-radius: 4px;
  justify-content: space-between;
}

.mobile-wrapper-select.active {
  background-color: $grapefruit-color;
  color: $white-color;
}

.mobile-wrapper-select.active .hero__select-text {
  color: $white-color;
}

.mobile-wrapper-select.active .arrow__icon {
  fill: $white-color;
}

// .list-mobile-filter {
//   transition-property: opacity;
//   transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
// }

.hero__select-text {
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 16px;
  line-height: 1.35;
  color: $grapefruit-color;
}

.arrow__icon {
  fill: $grapefruit-color;
}

.mobile-list-letters {
  width: 93px;
  max-height: 84px;
  border: 1px solid $grapefruit-color;
  border-radius: 4px;
  overflow-y: scroll;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.mobile-word {
  width: 36px;
  height: 15px;
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 10px;
  line-height: calc(15 / 10);
  display: flex;
  align-items: center;
  color: $gray-color;
  flex: none;
  order: 0;
  flex-grow: 0;
  &:hover {
    color: $grapefruit-color;
  }
}

.wrapper-tablet-desktop-filter {
  display: none;
  @include tablet {
    display: flex;
    flex-direction: column;
    width: 312px;
  }
}

.list-letters {
  @include tablet {
    width: 312px;
    flex-wrap: wrap;
    justify-content: center;
    display: inline-flex;
    @include desktop {
      width: 520px;
    }
  }
}

.list-letters-number {
  width: 288px;
  display: flex;
  justify-content: center;
  @include desktop {
    width: 480px;
  }
}

.word {
  width: 24px;
  height: 25px;
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 14px;
  line-height: calc(21 / 14);
  color: $gray-color;
  display: flex;
  align-items: center;
  justify-content: center;
  @include tablet {
    transition: transform 250ms linear;
    
    &:hover{
      transform: scale(1.7) rotate(1turn);
      color: $grapefruit-color;
    }
  }
  @include desktop {
    width: 40px;
    height: 40px;
    font-size: 24px;
    line-height: calc(36 / 24);
    cursor: pointer;
  }
}

.word.active {
  color: $grapefruit-color;
  @include tablet {
    font-size: 16px;
    text-shadow: 0px 4px 4px rgba(95, 103, 117, 0.25);
  }
  @include desktop {
    font-size: 26px;
  }
}


import { fetchDrinkByLetter } from './fetchFunction';
import { renderCocktail } from './render_function_for_cocktail';

const localFavorite = JSON.parse(localStorage.getItem('favoriteList'));
if (localFavorite == null) {
  let fav = { favoriteCocktails: [{ idDrink: 0 }], favoriteIngrediants: [] };
  localStorage.setItem('favoriteList', JSON.stringify(fav));
}

const svg = require('../images/icons.svg');

const mobileSelect = document.querySelector('.mobile-wrapper-select');
const mobileFilter = document.querySelector('.list-mobile-filter');
const mobileListLetters = document.querySelector('.mobile-list-letters');
const spanHeroMobile = document.querySelector('.hero__select-text');
const cocktailList = document.querySelector('.cocktail-list');
const titleCoctail = document.querySelector('.cocktail-title-main');
const notFound = document.querySelector('.not-found');

const desktopFilter = document.querySelector('.wrapper-tablet-desktop-filter');

async function onClickMobile(e) {
  if (e.target.nodeName === 'LI') {
    spanHeroMobile.textContent = e.target.textContent;
    mobileFilter.classList.add('visually-hidden');
    mobileSelect.classList.add('active');

    cocktailList.innerHTML = '';
    const response = await fetchDrinkByLetter(e.target.textContent);
    
    if (response.drinks === null) {
        titleCoctail.textContent = "Sorry, we didn't find any cocktail for you";
        notFound.innerHTML = `<svg
          class="icon-not_found"
          width="280"
          height="308"              
        >
          <use href="${svg}#icon-not-found"></use>
        </svg>`;
        return;
      }
      notFound.innerHTML = '';
      titleCoctail.textContent = 'Searching results';
      const markup = await renderCocktail(response);
      cocktailList.insertAdjacentHTML('beforeend', markup.join(''));
  }
}
const onClick = async e => {
  if (e.target.nodeName === 'LI') {
    cocktailList.innerHTML = '';
    const response = await fetchDrinkByLetter(e.target.textContent);
    if (response.drinks === null) {
      titleCoctail.textContent = "Sorry, we didn't find any cocktail for you";
      notFound.innerHTML = `<svg
        class="icon-not_found"
        width="345"
        height="380"              
      >
        <use href="${svg}#icon-not-found"></use>
      </svg>`;
      return;
    }
    notFound.innerHTML = '';
    titleCoctail.textContent = 'Searching results';
    const markup = await renderCocktail(response);
    cocktailList.insertAdjacentHTML('beforeend', markup.join(''));
  }
};

function onSwitch(target) {
  const arrayItem = document.querySelectorAll('.word');
  const prevActiveItem = [...arrayItem].find(item =>
    item.classList.contains('active')
  );
  //   const preActiveItem = [].find.call(arrayItem, item =>
  //     item.classList.contains('active')
  //   );
  if (prevActiveItem) {
    prevActiveItem.classList.remove('active');
    target.classList.add('active');
  }
  target.classList.add('active');
}

mobileSelect.addEventListener('click', () => {
  mobileFilter.classList.toggle('visually-hidden');
});

mobileListLetters.addEventListener('click', onClickMobile);

desktopFilter.addEventListener('click', e => {
  if (e.target.nodeName === 'LI') {
    onSwitch(e.target);
  }
  onClick(e);
});
